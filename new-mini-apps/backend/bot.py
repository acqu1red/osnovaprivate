from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import ApplicationBuilder, CommandHandler, CallbackQueryHandler, CallbackContext
from queue import Queue

# Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ /start
async def start(update: Update, context: CallbackContext) -> None:
    user_first_name = update.effective_user.first_name
    message = (
        f"Ð”Ð¾Ð±Ñ€Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸ ÑÑƒÑ‚Ð¾Ðº, {user_first_name}.\n\n"
        "Ð¢Ñ‹ Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð² Ð±Ð¾Ñ‚ â€” Ñ‚Ñ‹ Ð² ÑˆÐ»ÑŽÐ·Ðµ Ð·Ð°ÐºÑ€Ñ‹Ñ‚Ð¾Ð³Ð¾ ÐºÐ°Ð½Ð°Ð»Ð° ÐžÐ¡ÐÐžÐ’Ð, Ð³Ð´Ðµ Ð·Ð½Ð°Ð½Ð¸Ñ Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ñ†ÐµÐ½Ð½Ñ‹Ðµ, Ð¶Ð¸Ð·Ð½ÐµÐ½Ð½Ð¾ Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ñ‹Ðµ.\n\n"
        "ðŸ’³ ÐŸÐ¾Ð´Ð¿Ð¸ÑÐºÐ° - ÐµÐ¶ÐµÐ¼ÐµÑÑÑ‡Ð½Ð°Ñ 1500â‚½ Ð¸Ð»Ð¸ ~15$, Ð¾Ð¿Ð»Ð°Ñ‚Ð° Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ÑÑ Ð² Ð»ÑŽÐ±Ð¾Ð¹ Ð²Ð°Ð»ÑŽÑ‚Ðµ Ð¸ ÐºÑ€Ð¸Ð¿Ñ‚Ðµ.\n"
        "â¬‡ï¸ ÐÐ¸Ð¶Ðµ â€” ÐºÐ½Ð¾Ð¿ÐºÐ°. Ð–Ð¼ÐµÑˆÑŒ â€” Ð¸ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸ÑˆÑŒ Ñ‚ÑƒÐ´Ð°, Ð³Ð´Ðµ Ð»ÑŽÐ´Ð¸ Ð½Ðµ Ð½Ð¾ÑŽÑ‚, Ð° ÐµÐ±ÑƒÑ‚ ÑÑ‚Ð¾Ñ‚ Ð¼Ð¸Ñ€ Ð² Ð¾Ð±Ðµ Ñ‰ÐµÐºÐ¸."
    )

    keyboard = [
        [InlineKeyboardButton("ÐŸÐ¾Ð´Ñ€Ð¾Ð±Ð½ÐµÐµ Ð¾ ÐºÐ°Ð½Ð°Ð»Ðµ ðŸ“š", callback_data='more_info')],
        [InlineKeyboardButton("Ð—Ð°Ð´Ð°Ñ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ â“", callback_data='ask_question')]
    ]

    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text(message, reply_markup=reply_markup, parse_mode='Markdown')

# Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð½Ð°Ð¶Ð°Ñ‚Ð¸Ð¹ Ð½Ð° Ð¸Ð½Ð»Ð°Ð¹Ð½-ÐºÐ½Ð¾Ð¿ÐºÐ¸
async def button(update: Update, context: CallbackContext) -> None:
    query = update.callback_query
    await query.answer()

    if query.data == 'more_info':
        message = (
            "Ð¤ÐžÐ ÐœÐ£Ð›Ð â€” ÑÑ‚Ð¾ Ð·Ð¾Ð»Ð¾Ñ‚Ð¾Ð¹ Ñ€ÑŽÐºÐ·Ð°Ðº Ð·Ð½Ð°Ð½Ð¸Ð¹, Ñ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¼ Ñ‚Ñ‹ Ð±ÐµÐ·Ð°Ð»ÑŒÑ‚ÐµÑ€Ð½Ð°Ñ‚Ð¸Ð²Ð½Ð¾ Ð²Ñ‹Ð»ÐµÐ·ÐµÑˆÑŒ Ð¸Ð· Ð»ÑŽÐ±Ð¾Ð¹ Ð¶Ð¾Ð¿Ñ‹.\n\n"
            "Ð¢ÑƒÑ‚ Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ \"Ð¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ñ\" Ð¸ \"Ñ€Ð°Ð·Ð²Ð¸Ñ‚Ð¸Ðµ\", Ð° Ñ€Ð°Ð±Ð¾Ñ‡Ð¸Ðµ ÑÑ…ÐµÐ¼Ñ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ‚Ñ‹ Ð½Ðµ Ð½Ð°Ð¹Ð´Ñ‘ÑˆÑŒ Ð´Ð°Ð¶Ðµ ÐµÑÐ»Ð¸ Ð±ÑƒÐ´ÐµÑˆÑŒ ÐºÐ¾Ð¿Ð°Ñ‚ÑŒ ÐµÐ±ÑƒÑ‡Ð¸Ð¹ Ð”Ð°Ñ€ÐºÐ½ÐµÑ‚.\n\n"
            "ðŸ§  ÐŸÐ¾Ð´ÐºÐ°ÑÑ‚Ñ‹ Ñ Ñ‚Ð°Ð¹Ð¼ÐºÐ¾Ð´Ð°Ð¼Ð¸ â€” Ð¾Ñ‚ ÐŸÐ ÐžÐ¤ÐÐ™Ð›Ð˜ÐÐ“Ð Ð´Ð¾ Ð¼Ð°Ð½Ð¸Ð¿ÑƒÐ»ÑÑ†Ð¸Ð¹ Ð±Ð°Ð±, Ð¾Ñ‚ ÐŸÐ¡Ð˜Ð¥ÐžÐ¢Ð˜ÐŸÐžÐ’ Ð´Ð¾ ÐºÐ¾Ð¼Ð¼ÑƒÐ½Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ð½Ð° ÑƒÑ€Ð¾Ð²Ð½Ðµ ÑÐ¿ÐµÑ†ÑÐ»ÑƒÐ¶Ð±\n"
            "ðŸ’‰ ÐžÑ€Ð³Ð°Ð½Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð‘Ð˜ÐžÐ¥ÐÐšÐ˜ÐÐ“ â€” Ð¿Ð¾Ñ‡ÐµÐ¼Ñƒ Ñ‚ÐµÐ±Ðµ Ð¿Ð»Ð¾Ñ…Ð¾ Ð¸ ÐºÐ°Ðº Ñ‡ÐµÑ€ÐµÐ· Ð½ÐµÐ´ÐµÐ»ÑŽ Ð¿Ð¾Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐµÐ±Ñ Ð±Ð¾Ð³Ð¾Ð¼\n"
            "ðŸ’¸ Ð£Ñ€Ð¾ÐºÐ¸ Ð¿Ð¾ Ð¤Ð ÐžÐ”Ð£, Ð³Ð´Ðµ Ð¸Ð· Ð½ÑƒÐ»Ñ Ð´ÐµÐ»Ð°ÐµÑ‚ÑÑ $5000+ Ð² Ð¼ÐµÑÑÑ†, ÐµÑÐ»Ð¸ Ð½Ðµ ÐµÐ±Ð»Ð°Ð½\n"
            "ðŸ§± ÐšÐ°Ðº Ð²Ñ‹ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñƒ, Ð¾Ñ‚ÑˆÐ¸Ñ‚ÑŒ ÑÐ°Ð¼Ð¾Ð±Ð¸Ñ‡ÐµÐ²Ð°Ð½Ð¸Ðµ Ð¸ Ð½Ð°ÐºÐ¾Ð½ÐµÑ† ÑÑ‚Ð°Ñ‚ÑŒ Ð¼Ð°ÑˆÐ¸Ð½Ð¾Ð¹, Ð° Ð½Ðµ Ð¼ÑÐ¼Ð»ÐµÐ¹\n"
            "ðŸ“ˆ ÐÐ²Ñ‚Ð¾Ñ€ÑÐºÐ¸Ðµ ÑÑ‚Ñ€Ð°Ñ‚ÐµÐ³Ð¸Ð¸ Ð¿Ð¾ Ñ‚Ñ€ÐµÐ¹Ð´Ð¸Ð½Ð³Ñƒ â€” Ð¾Ñ‚ $500/Ð¼ÐµÑ Ð½Ð° Ð°Ð²Ñ‚Ð¾Ð¿Ð¸Ð»Ð¾Ñ‚Ðµ\n"
            "âš¡ Ð¡ÐºÐ°Ð»ÑŒÐ¿Ð¸Ð½Ð³ Ð¸ Ð±Ð¸Ñ€Ð¶Ð¸ â€” ÐºÐ°Ðº Ñ…Ð¸Ñ‚Ñ€Ð¸Ñ‚ÑŒ ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ, Ð½Ðµ Ñ‚ÐµÑ€ÑÑ Ð±Ð°Ð±ÐºÐ¸ Ð½Ð° ÐºÐ¾Ð¼Ð¸ÑÑÐ¸ÑÑ…\n"
            "ðŸŽ¥ Ð¡Ñ‚Ñ€Ð¸Ð¼Ñ‹ ÐºÐ°Ð¶Ð´Ñ‹Ðµ 2 Ð½ÐµÐ´ÐµÐ»Ð¸, Ð³Ð´Ðµ Ñ€Ð°Ð·Ð±Ð¸Ñ€Ð°ÑŽ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ Ð¿Ð¾Ð´Ð¿Ð¸ÑÑ‡Ð¸ÐºÐ¾Ð²: Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ, Ð´ÐµÐ½ÑŒÐ³Ð¸, Ð¿ÑÐ¸Ñ…Ð¸ÐºÐ°, Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ðµ\n\n"
            "Ð˜ ÑÑ‚Ð¾ Ð»Ð¸ÑˆÑŒ Ð¼Ð°Ð»Ð°Ñ Ñ‡Ð°ÑÑ‚ÑŒ Ñ‚Ð¾Ð³Ð¾, Ñ‡Ñ‚Ð¾ Ñ‚ÐµÐ±Ñ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚ Ð² Ð¤Ð¾Ñ€Ð¼ÑƒÐ»Ðµ.\n\n"
            "Ð­Ñ‚Ð¾ Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ ÐºÐ°Ð½Ð°Ð». Ð­Ñ‚Ð¾ ÑÐ¸Ð»Ð°, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿ÐµÑ€ÐµÑÑ‚Ñ€Ð°Ð¸Ð²Ð°ÐµÑ‚ Ñ‚Ð²Ð¾Ðµ Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð´ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ñ‚ÐµÐ±Ñ.\n"
            "Ð’Ð¾ÐºÑ€ÑƒÐ³ Ñ‚ÐµÐ±Ñ â€” Ð¼Ð¸Ð»Ð»Ð¸Ð¾Ð½ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð² ÑÐ´ÐµÐ»Ð°Ñ‚ÑŒ Ð±Ð°Ð±ÐºÐ¸, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð»ÑŽÐ´ÐµÐ¹ Ð¸ Ð½Ðµ Ð¿Ð°Ñ…Ð°Ñ‚ÑŒ, Ð¿Ð¾ÐºÐ° Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ð¿Ð°ÑˆÑƒÑ‚.\n\n"
            "Ð¢Ñ‹ Ð±ÑƒÐ´ÐµÑˆÑŒ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ð»ÑŽÐ´ÐµÐ¹ Ñ ÐµÐ³Ð¾ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ñ Ð² Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€Ðµ, Ð·Ð°Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ Ð¸Ð· Ð²Ð¾Ð·Ð´ÑƒÑ…Ð° Ð¸ Ð½ÐµÑÑ‚Ð¸ ÑÐµÐ±Ñ ÐºÐ°Ðº ÐºÐ¾Ñ€Ð¾Ð»ÑŒ, Ð¿Ð¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾ Ð·Ð½Ð°ÐµÑˆÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ, Ñ‡ÐµÐ¼ Ð¾Ð½Ð¸ ÐºÐ¾Ð³Ð´Ð°-Ð»Ð¸Ð±Ð¾ Ð¿Ð¾Ð¹Ð¼ÑƒÑ‚.\n\n"
            "ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ð½Ð¸Ð·Ñƒ â¬‡ï¸. Ð¢Ð°Ð¼ Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¸Ð½Ñ„Ð°. Ð¢Ð°Ð¼ Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· ÑÑ‚Ð°Ð´Ð°.\nÐ ÐµÑˆÐ°Ð¹."
        )
        keyboard = [
            [InlineKeyboardButton("Ð—Ð°Ð´Ð°Ñ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ â“", callback_data='ask_question')],
            [InlineKeyboardButton("ÐÐ°Ð·Ð°Ð´ ðŸ”™", callback_data='back')]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)
        await query.edit_message_text(text=message, reply_markup=reply_markup)

    elif query.data == 'ask_question':
        # ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ miniapps Ñ‡ÐµÑ€ÐµÐ· Telegram
        await query.edit_message_text(text="ÐžÑ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ðµ miniapps...", reply_markup=InlineKeyboardMarkup([
            [InlineKeyboardButton("ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ miniapps", url="https://t.me/OSNOVAprivate_bot/myapp")]
        ]))

    elif query.data == 'back':
        await start(update, context)

async def handle_message(update: Update, context: CallbackContext) -> None:
    if context.user_data.get('awaiting_question'):
        question = update.message.text
        # Ð¡Ð¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÐ° Ð² Ð±Ð°Ð·Ðµ Ð´Ð°Ð½Ð½Ñ‹Ñ… Ð¸Ð»Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ° Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ñƒ
        await update.message.reply_text("Ð’Ð°Ñˆ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¿Ð¾Ð»ÑƒÑ‡ÐµÐ½. ÐœÑ‹ ÑÐ²ÑÐ¶ÐµÐ¼ÑÑ Ñ Ð²Ð°Ð¼Ð¸ Ð² Ð±Ð»Ð¸Ð¶Ð°Ð¹ÑˆÐµÐµ Ð²Ñ€ÐµÐ¼Ñ.")
        context.user_data['awaiting_question'] = False
    else:
        await update.message.reply_text("ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ /start Ð´Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°.")

# ÐžÑÐ½Ð¾Ð²Ð½Ð°Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð´Ð»Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð±Ð¾Ñ‚Ð°
def main() -> None:
    application = ApplicationBuilder().token("8354723250:AAEWcX6OojEi_fN-RAekppNMVTAsQDU0wvo").build()

    application.add_handler(CommandHandler('start', start))
    application.add_handler(CallbackQueryHandler(button))

    application.run_polling()

if __name__ == '__main__':
    main()
